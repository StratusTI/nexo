generator client {
  provider      = "prisma-client-js"
  output        = "../../src/generated/steel"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_STEEL_URL")
}

model Usuario {
  id                  Int                @id @default(autoincrement())
  nome                String?            @default("") @db.VarChar(100)
  email               String?            @unique(map: "email") @default("") @db.VarChar(100)
  senha               String?            @default("") @db.VarChar(255)
  permissoes          String?            @db.Text
  sobrenome           String?            @default("") @db.VarChar(100)
  foto                String?            @default("") @db.VarChar(100)
  telefone            String?            @default("") @db.VarChar(30)
  admin               Boolean?           @default(false)
  idempresa           Int?
  idconfiguracao      Int?
  ramal               String?            @default("") @db.VarChar(6)
  queue_penalty       Int?               @default(5)
  session_token       String?            @default("") @db.VarChar(255)
  sigame              Boolean?           @default(false)
  superadmin          Boolean?           @default(false)
  role                Role?              @default(member)
  iddevice            String?            @db.VarChar(11)
  last_seen           DateTime?          @db.DateTime(0)
  online              Boolean            @default(false)
  agente_dinamico     Boolean?           @default(false)
  senha_api_md5       String?            @db.Char(32)
  vpn                 Boolean?           @default(false)
  microsip_singlemode Boolean?           @default(false)
  microsip_aa         Boolean?           @default(false)
  lgpd                Boolean?           @default(false)
  lgpd_date           DateTime?          @db.DateTime(0)
  departamento        String?            @default("") @db.VarChar(100)
  time                String?            @default("") @db.VarChar(100)
  dispositivos        String?            @db.LongText
  acessos_usuarios    acessos_usuarios[]
  horarios_padrao     horarios_padrao[]
  ponto               ponto[]
  empresa             Empresa?           @relation(fields: [idempresa], references: [id], onDelete: Restrict, onUpdate: Restrict, map: "usuarios_ibfk_1")

  @@index([iddevice, online, last_seen], map: "idx_usuarios_dev_online_seen")
  @@index([idempresa], map: "idempresa")
  @@map("usuarios")
}

model Empresa {
  id             Int       @id @default(autoincrement())
  nome           String?   @default("") @db.VarChar(100)
  cnpj           String?   @default("") @db.VarChar(20)
  endereco       String?   @default("") @db.VarChar(255)
  cep            String?   @default("") @db.VarChar(10)
  coordenadas    String?   @default("") @db.VarChar(50)
  data_criacao   DateTime? @db.Timestamp(0)
  data_alteracao DateTime? @db.Timestamp(0)
  logo_empresa   String?   @db.Text
  status         String?   @default("0") @db.VarChar(1)
  usuarios       Usuario[]

  @@map("empresa")
}

model acessos_usuarios {
  id            BigInt   @id @default(autoincrement()) @db.UnsignedBigInt
  usuario_id    Int
  numero_acesso Int      @default(0)
  created_at    DateTime @default(now()) @db.Timestamp(0)
  usuarios      Usuario  @relation(fields: [usuario_id], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_usuario")

  @@index([usuario_id], map: "idx_acessos_usuario_id")
}

model api {
  id              Int      @default(autoincrement())
  status          String?  @db.VarChar(50)
  date            DateTime @default(now()) @db.Timestamp(0)
  iddevice        String   @db.VarChar(11)
  whatsapp_numero String   @db.VarChar(20)
  sessionid       String?  @db.VarChar(100)

  @@id([id, whatsapp_numero])
}

model arquivos {
  id                    Int                     @id @default(autoincrement())
  caminho               String                  @db.VarChar(1024)
  nome_original         String                  @db.VarChar(255)
  mime_forcado          String?                 @db.VarChar(120)
  tamanho               BigInt?
  criado_em             DateTime?               @default(now()) @db.DateTime(0)
  descricao             String?                 @db.Text
  superadmin            String?                 @default("0") @db.VarChar(1)
  arquivos_download_log arquivos_download_log[]
}

model arquivos_download_log {
  id         BigInt    @id @default(autoincrement())
  idarquivo  Int
  idusuario  Int
  ip         String?   @db.VarChar(45)
  user_agent String?   @db.VarChar(255)
  dt         DateTime? @default(now()) @db.DateTime(0)
  arquivos   arquivos  @relation(fields: [idarquivo], references: [id], onDelete: Cascade, onUpdate: Restrict, map: "fk_adl_arq")

  @@index([idarquivo], map: "idarquivo")
  @@index([idusuario], map: "idusuario")
}

model arquivos_log {
  id        BigInt            @id @default(autoincrement())
  idarquivo Int?
  acao      arquivos_log_acao
  idusuario Int
  detalhes  String?           @db.VarChar(255)
  dt        DateTime?         @default(now()) @db.DateTime(0)

  @@index([idarquivo], map: "idarquivo")
  @@index([idusuario], map: "idusuario")
}

model configuracao {
  id         Int     @id @default(autoincrement())
  permissoes String? @db.Text
  idsistemas String? @db.VarChar(10)
  pagina     String? @db.VarChar(10)
  idusuario  Int?
}

model db_modelo {
  id        Int     @id @default(autoincrement())
  ip        String  @db.VarChar(100)
  usuario   String  @db.VarChar(100)
  senha     String  @default("yi32YeCLNVtM6g+hxyL9FUSNqkiwDQKdBD6yp4MjEr8=") @db.Text
  banco     String  @db.VarChar(100)
  idsistema String? @db.VarChar(3)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model device {
  id                Int       @default(autoincrement())
  idcliente         Int
  licenca           String    @default("") @db.Char(100)
  token             String    @default(dbgenerated("(uuid())")) @db.Char(36)
  versao            String?   @default("") @db.VarChar(50)
  descricao         String?   @default("") @db.Char(200)
  ativo             Int?
  ip                String?   @default("") @db.Char(32)
  usuario           String?   @default("") @db.Char(20)
  senha             String?   @default("") @db.Char(20)
  banco1            String?   @default("") @db.Char(30)
  banco2            String?   @default("") @db.Char(30)
  banco3            String?   @default("") @db.Char(30)
  banco4            String?   @default("") @db.Char(30)
  banco5            String?   @default("") @db.Char(30)
  banco6            String?   @default("") @db.Char(30)
  banco_status      Int?      @default(0)
  bilhetador        Int?      @default(0)
  banco7            String?   @default("") @db.Char(30)
  banco8            String?   @default("") @db.Char(30)
  banco9            String?   @default("") @db.Char(30)
  banco10           String?   @default("") @db.Char(30)
  banco11           String?   @default("steelflow2") @db.VarChar(50)
  ip_steel          String?   @default("") @db.Char(30)
  ip_proxy          String?   @default("") @db.Char(30)
  ip_firewall       String?   @default("") @db.Char(30)
  VPABX             Int?      @default(0)
  VLDAP             Int?      @default(0)
  VPROXY            Int?      @default(0)
  VFIREWALL         Int?      @default(0)
  VVIEWER           Int?      @default(0)
  VIDS              Int?      @default(0)
  VBACKUP           Int?      @default(0)
  VCHAMADOS         Int?      @default(0)
  VGESTAOTI         Int?      @default(0)
  VWIFI             Int?      @default(0)
  VPRINT            Int?      @default(0)
  VPRODUCAO         Int?      @default(0)
  VPONTO            Int?      @default(0)
  VFILESERVER       Int?      @default(0)
  VNAC              Boolean?  @default(false)
  VRETRO            Boolean?  @default(false)
  VFSMONITOR        Boolean?  @default(false)
  ip1               String?   @default("") @db.Char(30)
  ip2               String?   @default("") @db.Char(30)
  ip3               String?   @default("") @db.Char(30)
  ip4               String?   @default("") @db.Char(30)
  ip5               String?   @default("") @db.Char(30)
  ip6               String?   @default("") @db.Char(30)
  ip7               String?   @default("") @db.Char(30)
  ip8               String?   @default("") @db.Char(30)
  ip9               String?   @default("") @db.Char(30)
  ip10              String?   @default("") @db.Char(30)
  usuario1          String?   @default("") @db.Char(20)
  usuario2          String?   @default("") @db.Char(20)
  usuario3          String?   @default("") @db.Char(20)
  usuario4          String?   @default("") @db.Char(20)
  usuario5          String?   @default("") @db.Char(20)
  usuario6          String?   @default("") @db.Char(20)
  usuario7          String?   @default("") @db.Char(20)
  usuario8          String?   @default("") @db.Char(20)
  usuario9          String?   @default("") @db.Char(20)
  usuario10         String?   @default("") @db.Char(20)
  senha1            String?   @default("") @db.Char(20)
  senha2            String?   @default("") @db.Char(20)
  senha3            String?   @default("") @db.Char(20)
  senha4            String?   @default("") @db.Char(20)
  senha5            String?   @default("") @db.Char(20)
  senha6            String?   @default("") @db.Char(20)
  senha7            String?   @default("") @db.Char(20)
  senha8            String?   @default("") @db.Char(20)
  senha9            String?   @default("") @db.Char(20)
  senha10           String?   @default("") @db.Char(20)
  revenda           Int?      @default(0)
  idrevenda         String?   @default("") @db.VarChar(30)
  mail_servidorsmtp String?   @default("") @db.VarChar(250)
  mail_from         String?   @default("") @db.VarChar(250)
  mail_user         String?   @default("") @db.VarChar(250)
  mail_pass         String?   @default("") @db.VarChar(50)
  mail_port         String?   @default("") @db.VarChar(10)
  mail_ssl          Int?
  hostname_pdc      String?   @default("") @db.VarChar(250)
  update_wagente    Int?      @default(0)
  ip1ext            String?   @default("") @db.VarChar(30)
  ip2ext            String?   @default("") @db.VarChar(30)
  ip3ext            String?   @default("") @db.VarChar(30)
  ip4ext            String?   @default("") @db.VarChar(30)
  ip5ext            String?   @default("") @db.VarChar(30)
  ip6ext            String?   @default("") @db.VarChar(30)
  ip7ext            String?   @default("") @db.VarChar(30)
  ip8ext            String?   @default("") @db.VarChar(30)
  ip9ext            String?   @default("") @db.VarChar(30)
  ip10ext           String?   @default("") @db.VarChar(30)
  transbordo_sip    Int?      @default(0)
  transbordo_e1     Int?      @default(0)
  tpeer             String?   @default("") @db.VarChar(20)
  corebilhetes      Int?      @default(0)
  callback          Int?      @default(0)
  iabot             Int?      @default(0)
  data_iabot        DateTime? @db.DateTime(0)
  offline           Int?      @default(0)
  vempresaid        String?   @default("") @db.VarChar(10)
  cep               String?   @default("") @db.VarChar(10)
  address           String?   @default("") @db.VarChar(250)
  estado            String?   @default("") @db.VarChar(3)
  distrito          String?   @default("") @db.VarChar(250)
  city              String?   @default("") @db.VarChar(250)
  lat               String?   @default("") @db.VarChar(15)
  lng               String?   @default("") @db.VarChar(15)
  cod_ibge          String?   @default("") @db.VarChar(15)
  ddd               String?   @default("") @db.VarChar(3)
  pf                String?   @default("0") @db.VarChar(1)
  pj                String?   @default("0") @db.VarChar(1)
  telefone1         String?   @default("") @db.VarChar(30)
  telefone2         String?   @default("") @db.VarChar(30)
  contato_zap       String?   @default("") @db.VarChar(30)
  bandeira          String?   @default("") @db.VarChar(100)
  created_at        DateTime? @db.DateTime(0)
  updated_at        DateTime? @db.DateTime(0)
  pbx_update_files  Boolean?  @default(false)

  @@id([id, idcliente, licenca, token])
}

model dispositivos {
  id         Int  @id @default(autoincrement())
  idusuarios Int?
  iddevice   Int?
}

model dispositivos_usuario {
  id                    Int       @id @default(autoincrement())
  id_usuario            Int?
  device_id             String?   @db.VarChar(64)
  user_agent            String?   @db.Text
  plataforma            String?   @db.VarChar(100)
  idioma                String?   @db.VarChar(20)
  largura               Int?
  altura                Int?
  data_registro         DateTime? @default(now()) @db.DateTime(0)
  autorizado            Boolean?  @default(false)
  memoria_gb            Float?    @db.Float
  cpu_nucleos           Int?
  tipo_conexao          String?   @db.VarChar(20)
  velocidade_mbps       Float?    @db.Float
  nivel_bateria         Float?    @db.Float
  carregando            String?   @db.VarChar(10)
  tipo_dispositivo      String?   @db.VarChar(20)
  permissao_camera      Boolean?  @default(false)
  permissao_localizacao Boolean?  @default(false)
  data_atualizacao      DateTime  @default(now()) @db.DateTime(0)

  @@unique([id_usuario, device_id], map: "id_usuario")
}

model files {
  id            Int       @id @default(autoincrement())
  nome          String    @db.VarChar(255)
  relpath       String    @unique(map: "uq_files_relpath") @db.VarChar(500)
  sha256        String?   @db.Char(64)
  tamanho       BigInt?
  needs_update  Boolean   @default(false)
  versao        Int       @default(1)
  updated_at    DateTime  @default(now()) @db.DateTime(0)
  last_pull_at  DateTime? @db.DateTime(0)
  last_pull_ip  String?   @db.VarChar(45)
  classificacao String    @default("asterisk_script") @db.VarChar(50)
  descricao     String    @db.VarChar(500)
}

model files_log {
  iddevice        Int
  idfile          Int       @default(0)
  versao_aplicada Int       @default(0)
  last_pull_at    DateTime? @db.DateTime(0)
  token           String?   @db.VarChar(128)
  last_ip         String?   @db.VarChar(45)
  last_action     String?   @db.VarChar(20)
  last_status     String?   @db.VarChar(10)
  last_error      String?   @db.VarChar(255)
  last_count      Int?
  last_file_id    Int?
  last_file       String?   @db.VarChar(255)
  updated_at      DateTime  @default(now()) @db.DateTime(0)
  created_at      DateTime  @default(now()) @db.DateTime(0)

  @@id([idfile, iddevice])
  @@index([iddevice], map: "idx_files_log_device")
  @@index([idfile], map: "idx_files_log_file")
}

model horarios_padrao {
  id               Int                        @id @default(autoincrement())
  id_usuario       Int
  dia_semana       horarios_padrao_dia_semana
  hora_entrada     DateTime                   @db.Time(0)
  hora_saida       DateTime                   @db.Time(0)
  horario_flexivel Boolean?                   @default(false)
  usuarios         Usuario                    @relation(fields: [id_usuario], references: [id], onUpdate: Restrict, map: "horarios_padrao_ibfk_1")

  @@index([id_usuario], map: "id_usuario")
}

model linphone_config_pabx {
  id                 Int      @id @default(autoincrement())
  iddevice           Int      @unique(map: "uq_linphone_cfg_iddevice")
  display_name       String?  @db.VarChar(100)
  welcome_message    String?  @db.Text
  enable_video       Boolean  @default(true)
  enable_chat        Boolean  @default(true)
  codec_order        String   @default("opus,PCMU,PCMA") @db.VarChar(255)
  refresh_interval   Int      @default(0)
  allow_account_edit Boolean  @default(false)
  updated_at         DateTime @default(now()) @db.DateTime(0)
}

model noticias {
  id         Int      @id @default(autoincrement())
  titulo     String   @db.VarChar(255)
  destaque   String   @db.Text
  descricao  String   @db.Text
  topicos    String   @db.LongText
  rodape     String   @db.Text
  link_texto String   @db.VarChar(100)
  link_url   String   @db.VarChar(500)
  imagem     String   @db.VarChar(500)
  imagem_alt String   @db.VarChar(255)
  ativo      Boolean  @default(true)
  created_at DateTime @default(now()) @db.Timestamp(0)
  updated_at DateTime @default(now()) @db.Timestamp(0)

  @@index([ativo], map: "idx_ativo")
  @@index([created_at], map: "idx_created_at")
}

model paginas {
  id                  Int           @id @default(autoincrement())
  produto             String?       @default("") @db.VarChar(50)
  pagina              String?       @default("") @db.VarChar(20)
  descricao           String?       @default("") @db.VarChar(250)
  arquivo             String?       @default("") @db.VarChar(250)
  tipo                paginas_tipo?
  arquivo_homologacao String?       @default("") @db.VarChar(250)
}

model paginas_perfil {
  id         Int       @id @default(autoincrement())
  idpaginas  String?   @db.LongText
  nome       String?   @db.VarChar(250)
  descricao  String?   @db.VarChar(250)
  created_at DateTime? @db.DateTime(0)
  idsistemas String?   @db.VarChar(11)
}

model painel_custom {
  id        Int     @id @default(autoincrement())
  idusuario Int?
  colunas   String? @db.VarChar(3)
}

model permissoes {
  id         Int     @id @default(autoincrement())
  iduser     String? @default("") @db.VarChar(11)
  permissoes String? @db.Text
  tela       String? @default("") @db.VarChar(5)
}

model ponto {
  id                Int       @id @default(autoincrement())
  id_usuario        Int
  data              DateTime  @db.Date
  entrada           DateTime? @db.DateTime(0)
  almoco_saida      DateTime? @db.DateTime(0)
  almoco_retorno    DateTime? @db.DateTime(0)
  saida_final       DateTime? @db.DateTime(0)
  latitude_entrada  Decimal?  @db.Decimal(10, 8)
  longitude_entrada Decimal?  @db.Decimal(11, 8)
  latitude_saida    Decimal?  @db.Decimal(10, 8)
  longitude_saida   Decimal?  @db.Decimal(11, 8)
  foto_entrada      String?   @db.VarChar(255)
  usuarios          Usuario   @relation(fields: [id_usuario], references: [id], onUpdate: Restrict, map: "ponto_ibfk_1")

  @@unique([id_usuario, data], map: "id_usuario")
}

model ponto_config {
  id                         Int      @id @default(autoincrement())
  id_empresa                 Int?
  obrigatorio_camera         Boolean? @default(true)
  obrigatorio_localizacao    Boolean? @default(true)
  horario_flexivel           Boolean? @default(false)
  horario_tolerancia_entrada Int?     @default(0)
  horario_tolerancia_saida   Int?     @default(0)
}

model radiosonline {
  id           Int      @id @default(autoincrement())
  url          String?  @db.VarChar(254)
  nome         String?  @db.VarChar(100)
  data_criacao DateTime @default(now()) @db.Timestamp(0)
}

model sistemas {
  id              Int     @id @default(autoincrement())
  nome            String  @db.VarChar(100)
  descricao       String? @db.Text
  url             String  @db.VarChar(255)
  cor             String? @default("#0d6efd") @db.VarChar(20)
  url_homologacao String  @db.VarChar(255)
  banco           String? @default("") @db.VarChar(100)
}

model softphone_tokens {
  id         Int       @id @default(autoincrement())
  token      String    @unique(map: "token") @db.Char(64)
  iddevice   Int?
  ramal      String    @db.VarChar(50)
  sip_domain String?   @db.VarChar(255)
  sip_user   String?   @db.VarChar(80)
  sip_pass   String?   @db.VarChar(255)
  transport  String    @default("udp") @db.VarChar(10)
  criado_em  DateTime  @db.DateTime(0)
  expira_em  DateTime  @db.DateTime(0)
  usado_em   DateTime? @db.DateTime(0)
  criado_por Int?

  @@index([iddevice, ramal, usado_em, expira_em, criado_em], map: "idx_softphone_tokens_reuse")
}

model tokens_ws {
  id         Int       @id @default(autoincrement())
  usuario_id Int
  token      String    @unique(map: "token") @db.VarChar(255)
  criado_em  DateTime? @default(now()) @db.DateTime(0)
  expira_em  DateTime? @db.DateTime(0)
}

model whatsapp_emoji {
  id        Int      @id @default(autoincrement())
  emoji     String   @db.VarChar(20)
  categoria String?  @default("normal") @db.VarChar(50)
  ativo     Boolean? @default(true)
  iddevice  Int?     @default(0)
  custom    Boolean? @default(false)
  arquivo   String?  @db.VarChar(255)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model whatsapp_numero {
  id                Int       @id @default(autoincrement())
  iddevice          String?   @db.VarChar(11)
  numero            String    @db.VarChar(20)
  numero_id         String    @db.VarChar(50)
  meta              Boolean?  @default(false)
  zapi              Boolean?  @default(false)
  zapi_instancia    String?   @default("") @db.VarChar(250)
  zapi_token        String?   @default("") @db.VarChar(250)
  meta_token        String?   @default("") @db.VarChar(512)
  zapi_client_token String?   @default("") @db.VarChar(250)
  status            String?   @db.VarChar(20)
  status_erro       String?   @db.Text
  status_data       DateTime? @db.DateTime(0)
}

enum Role {
  admin
  member
  viewer
}

enum arquivos_log_acao {
  upload
  update
  delete
}

enum horarios_padrao_dia_semana {
  segunda
  terca
  quarta
  quinta
  sexta
  sabado
  domingo
}

enum paginas_tipo {
  Menu
  Configura__o            @map("Configuração")
  Relat_rio               @map("Relatório")
  Grava__es               @map("Gravações")
  Dashboard
  Administra__o           @map("Administração")
  Opera__o                @map("Operação")
  Usu_rio                 @map("Usuário")
  Mensagens
  Remoto
  Intelig_ncia_Artificial @map("Inteligência Artificial")
  Projeto
  PI_Planning             @map("PI Planning")
  SCRUM
  Colabora__o             @map("Colaboração")
}
